# Keyword Transposition Cipher

This project contains an implementation for the Keyword Transposition Cipher and a simple basic cryptanalysis module. It includes two runnable scripts that are helpful for demonstration and automated tests that verify correctness of the implementations.

Requirements
------------
- Python 3 (3.7+ is recommended)

Running the unit tests
----------------------
Run the project's unit tests using Python's unittest discovery:

```bash
python3 -m unittest discover -v -p '*_test.py'
```

Running the command-line scripts
--------------------------------

1) Keyword Transposition Cipher (command-line)

- Script: `run_keyword_transposition_cipher.py`
- Input format (interactive or piped):
	- First line: n (number of key/secret pairs to decode)
	- For each pair:
		- key (keyword, single word on its own line)
		- secret (space-separated ciphertext words on one line)

Example interactive usage:
```bash
./run_keyword_transposition_cipher.py
2
SPORT
LDXTW KXDTL NBSFX BFOII LNBHG ODDWN BWK
SECRET
JHQSU XFXBQ
```

Or using a here-document for non-interactive runs:
```bash
cat <<EOF | ./run_keyword_transposition_cipher.py
2
SPORT
LDXTW KXDTL NBSFX BFOII LNBHG ODDWN BWK
SECRET
JHQSU XFXBQ
EOF
```

Expected output (sample):
```
ILOVE SOLVI NGPRO GRAMM INGCH ALLEN GES
CRYPT OLOGY
```

Note about encoding vs decoding
-----------------------------
By default, `run_keyword_transposition_cipher.py` decodes ciphertext using a provided keyword. If you want to encode plaintext using a keyword (so you can later decode it), use the `--encrypt` or `-e` option to the script. Example:

Encode (encrypt) plaintext using a key:
```bash
./run_keyword_transposition_cipher.py -e --key foobar --secret "this is a test"
```

Decode (decrypt) the ciphertext using the same key:
```bash
./run_keyword_transposition_cipher.py -d --key foobar --secret "PKQJ QJ A PXJP"
```

If you try to decode plaintext directly (i.e. pass plaintext instead of ciphertext to the script in non-encrypt mode) you'll get a different output. That is expected â€” the script treats whatever you pass as ciphertext unless you use `--encrypt`.

2) Basic Cryptanalysis (command-line)

- Script: `run_basic_cryptanalysis.py`
- Input format: single line containing a space-separated ciphertext (words separated by spaces).

Example:
```bash
echo "LDXTW KXDTL NBSFX BFOII LNBHG ODDWN BWK" | ./run_basic_cryptanalysis.py
```

Output: The script will print a decrypted (heuristic) result generated by the basic cryptanalysis algorithm; this output may differ from the deterministic KeywordTranspositionCipher decryption.

Using the library programmatically
--------------------------------
You can also import the modules from Python to use the classes directly.

Keyword transposition cipher example:
```bash
python3 - <<'PYCODE'
from keywordtranspositioncipher.keyword_transposition_cipher import KeywordTranspositionCipher
keys = ['SPORT', 'SECRET']
secrets = [
		['LDXTW','KXDTL','NBSFX','BFOII','LNBHG','ODDWN','BWK'],
		['JHQSU', 'XFXBQ']
]
print(KeywordTranspositionCipher.run(keys, secrets))
PYCODE
```

Basic cryptanalysis (class-based) example
```bash
python3 - <<'PYCODE'
from basiccryptanalysis.basic_cryptanalysis import BasicCryptanalysis
print(BasicCryptanalysis.run(['SPORT','SECRET'], [['LDXTW KXDTL NBSFX BFOII LNBHG ODDWN BWK'], ['JHQSU XFXBQ']]))
PYCODE
```

Notes
-----
- All scripts and modules expect Python 3. They are not compatible with Python 2.
- `run_keyword_transposition_cipher.py` expects one or more key/secret pairs and will decode each pair using KeywordTranspositionCipher.
- `run_basic_cryptanalysis.py` demonstrates a heuristic deciphering algorithm and prints a single-line decrypted result.

If you want improved features (e.g. bruteforce best-match across candidate keys, updated CLI flags, or improved tests), open an issue or submit a PR.

License
-------
See the repository `LICENSE` for details.


## Notes

- COMMON_LETTERS = ['E', 'T', 'N', 'R', 'O', 'A', 'I', 'S']
- COMMON_DIGRAPH = ['TH', 'HE', 'EN', 'RE', 'ER']
- COMMON_TRIGRAPH = ['THE', 'ING', 'CON', 'ENT', 'ERE']